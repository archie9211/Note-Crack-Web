---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { collections } from "../content/config.mjs";

const subjects = Object.keys(collections);
---

<html
      lang="en"
      class="min-h-screen bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors"
>
      <head>
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width" />
            <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
            <title>Note Crack</title>

            <!-- ======================================================= -->
            <!--   NEW: Add this FOUC-prevention script                  -->
            <!-- ======================================================= -->
            <script is:inline>
                  document.documentElement.classList.toggle(
                        "dark",
                        localStorage.theme === "dark" ||
                              (!("theme" in localStorage) &&
                                    window.matchMedia(
                                          "(prefers-color-scheme: dark)"
                                    ).matches)
                  );
            </script>
      </head>
      <!-- ======================================================= -->
      <!--   End of new script                                     -->
      <!-- ======================================================= -->

      <body class="flex flex-col min-h-screen font-sans antialiased">
            <Header subjects={subjects} />
            <main class="flex-1 flex justify-center px-4">
                  <article
                        class="prose prose-neutral dark:prose-invert max-w-2xl w-full py-8 mx-auto"
                  >
                        <slot />
                  </article>
            </main>
            <Footer />
      </body>
</html>
